(function($){"use strict";UNCODE.justifiedGallery=function(){var breakPointMe=function(val){val=parseInt(val);if(isNaN(val))return!1;if(val>=1500)return 1;if(val<1500&&val>=960)return 2;if(val<960&&val>=570)return 3;if(val<570)return 4},gutterByBreakpoint=function(bp,gutter){var ret;switch(gutter){case"no-gutter":ret=0;break;case"px-gutter":ret=1;break;case"half-gutter":ret=18;break;case"double-gutter":switch(bp){case 3:case 4:ret=36;break;default:ret=72}break;case"triple-gutter":switch(bp){case 3:case 4:ret=36;break;default:ret=108}break;case"quad-gutter":switch(bp){case 2:ret=108;break;case 3:ret=72;break;case 4:ret=36;break;default:ret=144}break;default:ret=36}return ret};if($(".justified-layout").length>0){var justifiedContainersArray=[],typeGridArray=[],layoutGridArray=[],transitionDuration=[],$filterItems=[],$filters=$(".justified-system .isotope-filters"),$itemSelector=".tmb",$items,itemMargin,correctionFactor=0,firstLoad=!0,isOriginLeft=$("body").hasClass("rtl")?!1:!0,prevW=breakPointMe(UNCODE.wwidth);$('[class*="justified-container"]').each(function(){var isoData=$(this).data();transitionDuration.push($(".t-inside.animate_when_almost_visible",this).length>0?0:"0.5s"),isoData.type=="metro"?typeGridArray.push(!0):typeGridArray.push(!1),isoData.layout!==undefined?layoutGridArray.push(isoData.layout):layoutGridArray.push("justified"),justifiedContainersArray.push($(this))});var init_justifiedGallery=function(){for(var i=0,len=justifiedContainersArray.length;i<len;i++){var justifiedSystem=$(justifiedContainersArray[i]).closest($(".justified-system")),justifiedId=justifiedSystem.attr("id"),$layoutMode=layoutGridArray[i],gutter=$(justifiedContainersArray[i]).data("gutter"),rowHeight=$(justifiedContainersArray[i]).data("row-height"),maxRowHeight=$(justifiedContainersArray[i]).data("max-row-height"),lastRow=$(justifiedContainersArray[i]).data("last-row"),margins;rowHeight=typeof rowHeight=="undefined"||rowHeight===""?250:parseFloat(rowHeight),maxRowHeight=typeof maxRowHeight=="undefined"||maxRowHeight===""?!1:parseFloat(maxRowHeight),lastRow=typeof lastRow=="undefined"||lastRow===""?"nojustify":lastRow,margins=gutterByBreakpoint(prevW,gutter),$(justifiedContainersArray[i]).justifiedGallery({rowHeight:rowHeight,maxRowHeight:maxRowHeight,margins:margins,cssAnimation:!0,lastRow:lastRow,waitThumbnailsLoad:!1}).one("jg.complete",function(){onLayout($(this),0)});if($(justifiedContainersArray[i]).hasClass("isotope-infinite")&&$.fn.infinitescroll){$(justifiedContainersArray[i]).infinitescroll({navSelector:"#"+justifiedId+" .loadmore-button",nextSelector:"#"+justifiedId+" .loadmore-button a",itemSelector:"#"+justifiedId+" .justified-layout .tmb, #"+justifiedId+" .isotope-filters li",animate:!1,behavior:"local",debug:!1,loading:{selector:"#"+justifiedId+".justified-system .justified-footer-inner",speed:0,finished:undefined,msg:$("#"+justifiedId+" .loadmore-button")},errorCallback:function(){var justified_system=$(this).closest(".justified-system");$(".loading-button",justified_system).hide(),$(".loadmore-button",justified_system).attr("style","display:none !important")}},function(newElements,opts){var $galleryJustified=$(this),justifiedId=$galleryJustified.closest(".justified-system").attr("id"),filters=new Array,$loading_button=$galleryJustified.closest(".justified-system").find(".loading-button"),$infinite_button=$galleryJustified.closest(".justified-system").find(".loadmore-button"),$numPages=$("a",$infinite_button).data("pages"),delay=300;$("a",$infinite_button).html($("a",$infinite_button).data("label")),$infinite_button.show(),$loading_button.hide(),$numPages!=undefined&&opts.state.currPage==$numPages&&$infinite_button.hide(),$("> li",$galleryJustified).remove(),$.each($(newElements),function(index,val){$(val).addClass("tmb-iso"),$(val).is("li")&&filters.push($(val)[0]),$(val).addClass("uncode-appended")}),newElements=newElements.filter(function(x){return filters.indexOf(x)<0}),$.each($(filters),function(index,val){$("#"+justifiedId+' a[data-filter="'+$("a",val).attr("data-filter")+'"]').length==0&&$("#"+justifiedId+" .isotope-filters ul").append($(val))}),$galleryJustified.justifiedGallery("norewind",onLayout($galleryJustified,newElements.length));if(typeof UNCODE.lightbox!="undefined"&&!SiteParameters.lbox_enhanced){var getLightbox=UNCODE.lightboxArray["ilightbox_"+justifiedId];typeof getLightbox=="object"?getLightbox.refresh():UNCODE.lightbox()}typeof twttr!="undefined"&&twttr.widgets.load(justifiedContainersArray[i]),requestTimeout(function(){$galleryJustified.trigger("more-items-loaded"),$(window).trigger("more-items-loaded"),window.dispatchEvent(new CustomEvent("uncode-more-items-loaded"))},1e3)});if($(justifiedContainersArray[i]).hasClass("isotope-infinite-button")){var $infinite_justified=$(justifiedContainersArray[i]),$infinite_button=$infinite_justified.closest(".justified-system").find(".loadmore-button a");$infinite_justified.infinitescroll("pause"),$infinite_button.on("click",function(event){typeof UNCODE.lightbox!="undefined"&&!SiteParameters.lbox_enhanced&&$.each(UNCODE.lightboxArray,function(index,val){UNCODE.lightboxArray[index].destroy()}),event.preventDefault();var $justified_system=$(event.target).closest(".justified-system"),$infinite_justified=$justified_system.find(".justified-container"),justifiedId=$justified_system.attr("id");$(event.currentTarget).html(SiteParameters.loading),$infinite_justified.infinitescroll("resume"),$infinite_justified.infinitescroll("retrieve"),$infinite_justified.infinitescroll("pause"),$infinite_justified.trigger("more-items-loaded"),$(window).trigger("more-items-loaded"),window.dispatchEvent(new CustomEvent("uncode-more-items-loaded"))})}}}},onLayout=function(justifiedObj,startIndex){justifiedObj.css("opacity",1),justifiedObj.closest(".justified-system").find(".justified-footer").css("opacity",1),$(".tmb",justifiedObj).addClass("justified-object-loaded"),requestTimeout(function(){UNCODE.adaptive(),SiteParameters.dynamic_srcset_active==="1"&&UNCODE.refresh_dynamic_srcset_size(justifiedObj),typeof MediaElement=="function"&&$(justifiedObj).find("audio,video").each(function(){$(this).mediaelementplayer({pauseOtherPlayers:!1})}),$(justifiedObj).find(".nested-carousel").length?(typeof UNCODE.carousel!="undefined"&&UNCODE.carousel($(justifiedObj).find(".nested-carousel")),requestTimeout(function(){boxAnimation($(".tmb",justifiedObj),startIndex,!0,justifiedObj),justifiedObj.addClass("justified-gallery-finished"),Waypoint.refreshAll()},200)):requestTimeout(function(){boxAnimation($(".tmb",justifiedObj),startIndex,!0,justifiedObj),justifiedObj.addClass("justified-gallery-finished"),Waypoint.refreshAll()},300)},100)},boxAnimation=function(items,startIndex,sequential,container){var $allItems=items.length-startIndex,showed=0,index=0;if(container.closest(".owl-item").length==1)return!1;$.each(items,function(index,val){var elInner=$("> .t-inside",val);if(UNCODE.isUnmodalOpen&&!val.closest("#unmodal-content"))return;val[0]&&(val=val[0]),elInner.hasClass("animate_when_almost_visible")&&!elInner.hasClass("force-anim")?new Waypoint({context:UNCODE.isUnmodalOpen?document.getElementById("unmodal-content"):window,element:val,handler:function(){var element=$("> .t-inside",this.element),parent=$(this.element),currentIndex=parent.index(),delay=sequential?startIndex!==0?currentIndex-$allItems:currentIndex:index,delayAttr=parseInt(element.attr("data-delay"));isNaN(delayAttr)&&(delayAttr=100),delay-=showed;var objTimeout=requestTimeout(function(){element.removeClass("zoom-reverse").addClass("start_animation"),showed=parent.index()},delay*delayAttr);parent.data("objTimeout",objTimeout),UNCODE.isUnmodalOpen||this.destroy()},offset:"100%"}):(elInner.removeClass("animate_when_almost_visible"),$(val).addClass("no-waypoint-animation")),index++})};$filters.on("click","a[data-filter]",function(evt){var $filter=$(this),filterContainer=$filter.closest(".isotope-filters"),filterValue=$filter.attr("data-filter"),container=$filter.closest(".justified-system").find($(".justified-layout")),lastRow=container.data("last-row"),transitionDuration=0,delay=300,filterItems=[];lastRow=typeof lastRow=="undefined"||lastRow===""?"nojustify":lastRow;var filter_items=function(){filterValue!==undefined?($.each($("> .tmb > .t-inside",container),function(index,val){var parent=$(val).parent(),objTimeout=parent.data("objTimeout");objTimeout&&($(val).removeClass("zoom-reverse"),clearRequestTimeout(objTimeout)),transitionDuration==0&&($(val).hasClass("animate_when_almost_visible")?$(val).addClass("zoom-reverse").removeClass("start_animation"):$(val).addClass("animate_when_almost_visible zoom-reverse zoom-anim force-anim"))}),requestTimeout(function(){var $block,selector,lightboxElements,$boxes;filterValue!==""&&filterValue!=="*"?($("[data-lbox^=ilightbox]",container).addClass("lb-disabled"),selector="."+filterValue,$.each($(selector,container),function(index,block){lightboxElements=$("[data-lbox^=ilightbox]",block),lightboxElements.length&&(lightboxElements.removeClass("lb-disabled"),container.data("lbox",$(lightboxElements[0]).data("lbox"))),filterItems.push(block)}),container.justifiedGallery({filter:selector,lastRow:"nojustify"})):(container.justifiedGallery({filter:!1,lastRow:lastRow}),$("[data-lbox^=ilightbox]",$block).removeClass("lb-disabled"),filterItems=$("> .tmb",container)),container.trigger("more-items-loaded"),$(window).trigger("more-items-loaded"),window.dispatchEvent(new CustomEvent("uncode-more-items-loaded")),$(".t-inside.zoom-reverse",container).removeClass("zoom-reverse");if(typeof UNCODE.lightbox!="undefined"&&!SiteParameters.lbox_enhanced){var getLightbox=UNCODE.lightboxArray[container.data("lbox")];typeof getLightbox=="object"?getLightbox.refresh():UNCODE.lightbox()}transitionDuration==0&&requestTimeout(function(){boxAnimation(filterItems,0,!1,container)},100),requestTimeout(function(){Waypoint.refreshAll(),container.trigger("more-items-loaded"),$(window).trigger("more-items-loaded"),window.dispatchEvent(new CustomEvent("uncode-more-items-loaded")),typeof ScrollTrigger!="undefined"&&ScrollTrigger!==null&&$(document).trigger("uncode-scrolltrigger-refresh")},2e3)},delay)):(typeof UNCODE.lightbox!="undefined"&&!SiteParameters.lbox_enhanced&&$.each(UNCODE.lightboxArray,function(index,val){UNCODE.lightboxArray[index].destroy()}),$.each($("> .tmb > .t-inside",container),function(index,val){var parent=$(val).parent(),objTimeout=parent.data("objTimeout");objTimeout&&($(val).removeClass("zoom-reverse").removeClass("start_animation"),clearRequestTimeout(objTimeout)),transitionDuration==0&&($(val).hasClass("animate_when_almost_visible")?$(val).addClass("zoom-reverse").removeClass("start_animation"):$(val).addClass("animate_when_almost_visible zoom-reverse zoom-anim force-anim"))}),typeof UNCODE.lightbox!="undefined"&&!SiteParameters.lbox_enhanced&&UNCODE.lightbox(),container.parent().addClass("justified-loading"),container.trigger("more-items-loaded"),$(window).trigger("more-items-loaded"),window.dispatchEvent(new CustomEvent("uncode-more-items-loaded")))};if(!$filter.hasClass("active"))if(filterContainer.hasClass("filter-scroll")){var calc_scroll=SiteParameters.index_pagination_scroll_to!=0?eval(SiteParameters.index_pagination_scroll_to):container.closest(".row-parent").offset().top;calc_scroll-=UNCODE.get_scroll_offset();var bodyTop=document.documentElement.scrollTop||document.body.scrollTop,delta=bodyTop-calc_scroll,scrollSpeed=SiteParameters.constant_scroll=="on"?Math.abs(delta)/parseFloat(SiteParameters.scroll_speed):SiteParameters.scroll_speed,filterTolerance=!1,filter_timeout;scrollSpeed<1e3&&SiteParameters.constant_scroll=="on"&&(scrollSpeed=1e3),UNCODE.isFullPage||(scrollSpeed==0?($("html, body").scrollTop(calc_scroll),UNCODE.scrolling=!1,filter_items()):(bodyTop<=calc_scroll+20&&bodyTop>=calc_scroll-20&&(filter_items(),filterTolerance=!0),$("html, body").animate({scrollTop:calc_scroll},{easing:"easeInOutQuad",duration:scrollSpeed,complete:function(){UNCODE.scrolling=!1,filterTolerance||(filter_timeout=setTimeout(function(){clearTimeout(filter_timeout),filter_items()},200))}})))}else filter_items();evt.preventDefault()}),$filters.each(function(i,buttonGroup){var $buttonGroup=$(buttonGroup);$buttonGroup.on("click","a",function(){$buttonGroup.find(".active").removeClass("active"),$(this).addClass("active")});var $cats_mobile_trigger=$(".menu-smart--filter-cats_mobile-toggle-trigger",$buttonGroup),$cats_mobile_toggle=$(".menu-smart--filter-cats_mobile-toggle",$buttonGroup),$cats_filters=$(".menu-smart--filter-cats",$buttonGroup);$buttonGroup.on("click","a.menu-smart--filter-cats_mobile-toggle-trigger",function(e){e.preventDefault(),$cats_filters.slideToggle(400,"easeInOutCirc")})}),window.addEventListener("boxResized",function(e){prevW!==breakPointMe(UNCODE.wwidth)&&(prevW=breakPointMe(UNCODE.wwidth),$.each($(".justified-layout"),function(index,val){var gutter=$(this).data("gutter"),margins=gutterByBreakpoint(prevW,gutter);$(this).justifiedGallery({margins:margins}),$(this).find(".mejs-video,.mejs-audio").each(function(){$(this).trigger("resize")})}))},!1),init_justifiedGallery()}}})(jQuery)